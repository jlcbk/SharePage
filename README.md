# SharePage - 安全文本/文件分享工具

这是一个基于PHP的安全文件分享应用，具有管理员认证、文件上传和密码保护下载功能。

## 功能

*   **管理员上传认证：** 只有知道管理员密码的用户才能上传内容。
*   **内容上传：** 支持上传纯文本或单个文件。
*   **下载密码：** 上传者可以为每次分享设置一个独立的下载密码。
*   **分享ID：** 成功上传后会生成一个唯一的分享 ID，用于下载。
*   **内容下载：** 用户需要提供分享 ID 和对应的下载密码才能获取内容。

## 文件结构

*   `share_page.php`: 用户交互的前端页面（HTML/PHP）。
*   `share_handler.php`: 处理上传和下载逻辑的后端 PHP 脚本。
*   `uploads/`: (自动创建) 用于存储上传文件的目录。
*   `shares.json`: (自动创建) 用于存储分享元数据（ID、密码哈希、类型、路径/文本等）的 JSON 文件。

## 安装与配置

1.  **部署文件：** 将 `share_page.php` 和 `share_handler.php` 文件上传到您的 PHP Web 服务器上，放在一个可以通过 Web 访问的目录中（例如，网站根目录下的 `share` 文件夹）。
2.  **设置管理员密码：**
    *   打开 `share_page.php` 和 `share_handler.php`。
    *   找到 `'YOUR_ADMIN_UPLOAD_PASSWORD'` 这一行。
    *   将其替换为您自己设定的**强密码**。
    *   **重要：** 两个文件中的管理员密码必须完全相同。
3.  **设置目录权限：**
    *   脚本会尝试自动在 `share_handler.php` 所在的目录下创建 `uploads` 文件夹和 `shares.json` 文件。
    *   确保运行 Web 服务器的用户（例如 `www-data`, `apache`, `nginx` 等）对 `share_handler.php` 所在的目录具有**写入权限**。如果自动创建失败，请手动创建 `uploads` 目录并赋予其写入权限。
4.  **访问页面：** 通过浏览器访问 `share_page.php` 的 URL（例如 `http://yourdomain.com/share/share_page.php`）。

## 使用

1.  **管理员认证：** 访问页面，首先输入管理员密码进行认证。
2.  **上传：** 认证成功后，选择上传类型（文本或文件），输入内容或选择文件，设置下载密码，然后点击上传。
3.  **获取分享 ID：** 上传成功后，页面会显示生成的分享 ID。
4.  **下载：** 其他用户访问页面，在下载区域输入分享 ID 和对应的下载密码，点击获取内容。

## 安全注意事项

*   **管理员认证：** 当前版本使用简单的隐藏字段令牌进行管理员认证，这在生产环境中不够安全。建议修改代码以使用更安全的机制，例如 PHP 会话 (session)。
*   **文件上传验证：** 代码对上传文件的类型和大小没有做严格限制。建议根据需要添加更详细的验证（例如，允许的文件扩展名、最大文件大小）。
*   **错误处理：** 可以添加更详细的错误处理和日志记录。
*   **数据存储：** 使用 JSON 文件存储元数据对于少量分享是可行的，但对于大量分享或高并发场景，考虑使用数据库。
*   **HTTPS：** 确保您的服务器使用 HTTPS 来加密传输中的数据，特别是密码。
*   **密码强度：** 强制用户设置强下载密码。